(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{130:function(e,t){},132:function(e,t){},160:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(62),o=n.n(r),c=(n(73),n(8)),s=n(12),u=n(11),l=n(29),d=n(10),m=n(6),f=n(26);n(74),n(75);function p(e){var t=e.isExpanded,n=e.onClick;return i.a.createElement("button",{className:"ExpandButton",onClick:n},function(e){return e?"\u25b6\u25c0":"\u25c0\u25b6"}(t))}function h(e){var t=e.isTruncated,n=e.location;return t?n.address.city+", "+n.address.state:n.display_name}n(76);function v(){return i.a.createElement("div",{className:"SectionDivider"})}n(77);var g=n(21),y={},E=y;function M(){window.innerWidth>window.innerHeight?(y.major=window.innerWidth,y.minor=window.innerHeight):(y.major=window.innerHeight,y.minor=window.innerWidth)}M(),window.addEventListener("resize",M),window.addEventListener("orientationchange",M);var b=n(63),N=n.n(b),w=n(64),T=n.n(w),C=n(65),P=n.n(C),S=N.a,j=T.a,R=P.a;function x(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function O(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e]}function k(e){return e.getHours()+":"+e.getMinutes()}function L(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%60);return B(t,2)+":"+B(n,2)+":"+B(a,2)}function B(e,t){var n=""+e;return n.length<t?"0".repeat(t-n.length)+n:n}function D(e,t){return new Promise(function(n,a){S().reverse(t,e).end(function(e,t){e?a(e):(console.log(t),n(t))})})}function H(e,t){for(var n=t.getTime(),a=e.length,i=0;i<a;i++){if(e[i].timestamp.getTime()>=n)return i}return a-1}function F(e){return e.reduce(function(e,t){return e+t},0)}function A(e){if(isNaN(e)||e===1/0||e===-1/0)return"stationary";var t=e-Math.floor(e);return Math.floor(e)+":"+B(Math.floor(60*t),2)}function U(e){return e/1609.34}function _(e){return 0===e.records.length?e.start_time:e.records[0].timestamp}function I(e){return 0===e.records.length?e.end_time:e.records[e.records.length-1].timestamp}function V(e){var t=e.sport.sport,n=e.activity,a=n.sessions.map(W),i=a.map(function(e){return e.laps}).flat(),r=a.map(function(e){return e.records}).flat();r.forEach(function(e,t){e.index=t});var o=F(a.map(function(e){return e.total_distance})),s=F(a.map(function(e){return e.total_elapsed_time})),u=r[0].timestamp,l=r[r.length-1].timestamp,d=Object(c.a)({},n,{sport:t,sessions:a,laps:i,records:r,total_distance:o,total_elapsed_time:s,start_time:u,end_time:l});return function(e){"running"===e.sport&&e.records.forEach(function(e){e.cadence*=2})}(d),function(e){e.records.forEach(function(e){e.pace=60/(e.speed*Y)})}(d),d}function W(e){var t=Object(c.a)({},e);return t.laps=t.laps.map(K),t.records=t.laps.map(function(e){return e.records}).flat(),t.start_time=t.records[0].timestamp,t.end_time=t.records[t.records.length-1].timestamp,t}function K(e){var t=Object(c.a)({},e);return t.records=t.records.slice(),t.start_time=t.records[0].timestamp,t.end_time=t.records[t.records.length-1].timestamp,t}var J,Y=.621371;!function(e){e[e.HeartRate=0]="HeartRate",e[e.Cadence=1]="Cadence",e[e.Pace=2]="Pace"}(J||(J={}));var X,z=(X=J,Object.values(X).filter(function(e){return"number"===typeof e}));function $(e,t){switch(t){case J.HeartRate:return e.heart_rate;case J.Cadence:return e.cadence;case J.Pace:return e.pace}}function q(e){var t=e.laps.map(G),n=t.map(function(e){return e.records}).flat();return Object(c.a)({},e,{laps:t,records:n})}function G(e){var t=e.records.map(Q);return Object(c.a)({},e,{records:t})}function Q(e){var t=function(e){return new Date(e.getTime())}(e.timestamp);return Object(c.a)({},e,{timestamp:t})}function Z(e){var t=e.attribute,n=e.records,a=e.offsetIndex,r=e.viewedDuration,o=e.filter,c=e.shouldConvertRpmToSpm;return i.a.createElement("div",{className:"Timeline"},i.a.createElement("div",{className:"TimelineLabel"},function(e,t){switch(e){case J.HeartRate:return"Heart rate (bpm)";case J.Cadence:return"Cadence "+(t?"(spm)":"(rpm)");case J.Pace:return"Pace (min/mi)"}}(t,c),function(){var e=n[a];return e?i.a.createElement("span",{className:"ActiveRecordValue ActiveRecordValue--"+(o.isAttributeIllegal(t,e)?"illegal":o.isAnyAttributeIllegal(e)?"illegalOther":"legal")}," = "+(t===J.Pace?A($(e,t)):$(e,t))):null}()),i.a.createElement(g.Stage,{width:window.innerWidth,height:ie()},i.a.createElement(g.Layer,{width:window.innerWidth,height:ie()},i.a.createElement(g.Rect,{fill:"#eeea",width:window.innerWidth,height:ie()}),function(e,t){if(0===e.length)return[];var n=e[0].timestamp.getTime()+t,a=e.findIndex(function(e){return e.timestamp.getTime()>n});return-1===a?e.slice():e.slice(0,a)}(n.slice(a),r).map(function(e,c){var s=e.timestamp.getTime()-n[a].timestamp.getTime();return i.a.createElement(g.Circle,{key:e.index,fill:o.isAttributeIllegal(t,e)?ne:o.isAnyAttributeIllegal(e)?ae:0===c?ee:te,x:window.innerWidth*(s/r)+re(),y:ie()-ie()*($(e,t)/200),radius:re()})}))))}var ee="#3ce",te="#08b",ne="red",ae="orange";function ie(){return.2*E.minor}function re(){return.005*E.major}var oe=n(34),ce=n.n(oe),se=n(67);function ue(e,t){var n=function(e){var t=e.sessions.map(q),n=t.map(function(e){return e.laps}).flat(),a=t.map(function(e){return e.records}).flat();return Object(c.a)({},e,{sessions:t,laps:n,records:a})}(e),a=0,i=0;n.sessions.forEach(function(e){if(e.records.length>0){var n=Object(se.a)(e.records),r=n[0],o=n.slice(1),c=r.timestamp,s=r.distance;o.forEach(function(e){if(!t.isAnyAttributeIllegal(e)){var n=e.timestamp.getTime()-c.getTime(),r=e.distance-s;a+=n,i+=r}c=e.timestamp,s=e.distance})}});var r,o=function(e,t){var n=U(e);return t/60/n}(i,a*=.001),s=n.records.map(function(e){return e.heart_rate}),u=F(r=s)/r.length;return{totalDuration:a,totalDistance:i,averagePace:o,averageHeartRate:u}}var le,de=n(68);!function(e){e[e.Min=0]="Min",e[e.Max=1]="Max"}(le||(le={}));var me=function(){function e(t){Object(s.a)(this,e),this.pendingHeartRateMin=void 0,this.pendingHeartRateMax=void 0,this.pendingCadenceMin=void 0,this.pendingCadenceMax=void 0,this.pendingSpeedMin=void 0,this.pendingSpeedMax=void 0,this.heartRate=void 0,this.cadence=void 0,this.speed=void 0,this.pendingHeartRateMin=""+t.heartRate[0],this.pendingHeartRateMax=""+t.heartRate[1],this.pendingCadenceMin=""+t.cadence[0],this.pendingCadenceMax=""+t.cadence[1],this.pendingSpeedMin=""+t.speed[0],this.pendingSpeedMax=""+t.speed[1],this.heartRate=t.heartRate,this.cadence=t.cadence,this.speed=t.speed}return Object(u.a)(e,[{key:"setPendingBound",value:function(t,n,a){var i=new e(this.config());return i[function(e,t){var n=function(e){switch(e){case J.HeartRate:return"pendingHeartRate";case J.Cadence:return"pendingCadence";case J.Pace:return"pendingSpeed"}}(e),a=function(e){switch(e){case le.Min:return"Min";case le.Max:return"Max"}}(t);return n+a}(t,n)]=a,i}},{key:"config",value:function(){return{heartRate:this.heartRate,cadence:this.cadence,speed:this.speed}}},{key:"syncPendingBoundsWithActualBounds",value:function(){return new e({heartRate:fe(this.heartRate,this.pendingHeartRateMin,this.pendingHeartRateMax),cadence:fe(this.cadence,this.pendingCadenceMin,this.pendingCadenceMax),speed:fe(this.speed,this.pendingSpeedMin,this.pendingSpeedMax)})}},{key:"isAttributeIllegal",value:function(e,t){return!this.isAttributeLegal(e,t)}},{key:"isAttributeLegal",value:function(e,t){var n=this.getBounds(e),a=Object(de.a)(n,2),i=a[0],r=a[1],o=$(t,e);return i<=o&&o<=r}},{key:"isAnyAttributeIllegal",value:function(e){var t=this;return z.some(function(n){return t.isAttributeIllegal(n,e)})}},{key:"getBounds",value:function(e){switch(e){case J.HeartRate:return this.heartRate;case J.Cadence:return this.cadence;case J.Pace:return this.speed}}}]),e}();function fe(e,t,n){var a=pe(t),i=pe(n);return[isNaN(a)?e[0]:a,isNaN(i)?e[1]:i]}function pe(e){return/^-?\d*$/.test(e)?parseInt(e,10):NaN}var he,ve=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,[{key:"match",value:function(e){return this.isNone()?e.none():e.some(this.value)}},{key:"isNone",value:function(){return this.isNone_}},{key:"isSome",value:function(){return!this.isNone()}},{key:"map",value:function(t){var n=this;return this.match({none:function(){return n},some:function(n){return e.some(t(n))}})}},{key:"unwrapOr",value:function(e){return this.match({none:function(){return e},some:function(e){return e}})}}],[{key:"some",value:function(t){var n=Object.create(e.prototype);return n.isNone_=!1,n.value=t,n}},{key:"none",value:function(){return ge}}]),e}(),ge=function(){var e=Object.create(ve.prototype);return e.isNone_=!0,e}(),ye=n(35),Ee=n(66);!function(e){e[e.Pending=0]="Pending",e[e.Fulfilled=1]="Fulfilled",e[e.Rejected=2]="Rejected"}(he||(he={}));var Me=function(e){function t(e,n){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).status=void 0,a.value=void 0,a.error=void 0,a.updateListeners=void 0,a.status=he.Pending,a.updateListeners=[],n&&(Object(ye.a)(Object(d.a)(t.prototype),"then",Object(m.a)(a)).call(Object(m.a)(a),function(e){a.status=he.Fulfilled,a.value=e,a.updateListeners.forEach(function(e){e()})}),Object(ye.a)(Object(d.a)(t.prototype),"catch",Object(m.a)(a)).call(Object(m.a)(a),function(e){a.status=he.Rejected,a.error=e,a.updateListeners.forEach(function(e){e()})})),a}return Object(f.a)(t,e),Object(u.a)(t,null,[{key:"fromPromise",value:function(e){return new t(function(t,n){e.then(t),e.catch(n)},!0)}}]),Object(u.a)(t,[{key:"match",value:function(e){switch("function"===typeof e.onUpdate&&this.updateListeners.push(e.onUpdate),this.status){case he.Pending:return e.pending();case he.Fulfilled:return e.fulfilled(this.value);case he.Rejected:return e.rejected(this.error)}}}]),t}(Object(Ee.a)(Promise)),be=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).fileRef=void 0,n.minimapRef=void 0,n.onChangePendingHeartRateMin=void 0,n.onChangePendingHeartRateMax=void 0,n.onChangePendingCadenceMin=void 0,n.onChangePendingCadenceMax=void 0,n.onChangePendingSpeedMin=void 0,n.onChangePendingSpeedMax=void 0,n.state={activity:ve.none(),mouseDownTarget:ve.none(),filter:new me({heartRate:[0,200],cadence:[0,200],speed:[0,40]})},n.fileRef=i.a.createRef(),n.minimapRef=i.a.createRef(),window.addEventListener("resize",function(){return n.forceUpdate()}),window.addEventListener("orientationchange",function(){return n.forceUpdate()}),n.forceUpdate=n.forceUpdate.bind(Object(m.a)(n)),n.handleUpload=n.handleUpload.bind(Object(m.a)(n)),n.toggleIsStartLocationTruncated=n.toggleIsStartLocationTruncated.bind(Object(m.a)(n)),n.toggleIsEndLocationTruncated=n.toggleIsEndLocationTruncated.bind(Object(m.a)(n)),n.onMouseDown=n.onMouseDown.bind(Object(m.a)(n)),n.onMouseUp=n.onMouseUp.bind(Object(m.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(m.a)(n)),n.onTouchStart=n.onTouchStart.bind(Object(m.a)(n)),n.onTouchMove=n.onTouchMove.bind(Object(m.a)(n)),n.onTouchEnd=n.onTouchEnd.bind(Object(m.a)(n)),n.onSyncPendingBounds=n.onSyncPendingBounds.bind(Object(m.a)(n)),n.onChangePendingHeartRateMin=function(e){return n.onChangePendingBound(J.HeartRate,le.Min,e)},n.onChangePendingHeartRateMax=function(e){return n.onChangePendingBound(J.HeartRate,le.Max,e)},n.onChangePendingCadenceMin=function(e){return n.onChangePendingBound(J.Cadence,le.Min,e)},n.onChangePendingCadenceMax=function(e){return n.onChangePendingBound(J.Cadence,le.Max,e)},n.onChangePendingSpeedMin=function(e){return n.onChangePendingBound(J.Pace,le.Min,e)},n.onChangePendingSpeedMax=function(e){return n.onChangePendingBound(J.Pace,le.Max,e)},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App",onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd},this.state.activity.match({none:function(){return i.a.createElement("label",{className:"UploadButton"},i.a.createElement("input",{type:"file",accept:"fit",onChange:e.handleUpload,ref:e.fileRef,style:{display:"none"}}),"Upload .fit file")},some:function(t){var n=t.activity,a=t.startLocation,r=t.isStartLocationTruncated,o=t.endLocation,c=t.isEndLocationTruncated,s=t.offsetTime,u=t.offsetIndex,l=t.viewedDuration,d=t.cumulatives,m=n.sport,f=n.records,g=n.total_elapsed_time,y=_(n),E=I(n),M="running"===m;return i.a.createElement("div",{className:"ActivityView"},i.a.createElement("div",{className:"Head"},i.a.createElement("div",{className:"SectionHeader"},O(y.getMonth())+" "+y.getDate()+" ",a.match({onUpdate:e.forceUpdate,pending:function(){return""},fulfilled:function(e){return e.address.city+" "},rejected:function(){return""}}),x(m)),i.a.createElement("div",{className:"MinimapBackground",ref:e.minimapRef},i.a.createElement("div",{className:"MinimapForeground",style:{width:100*(s.getTime()-y.getTime())/(E.getTime()-y.getTime())+"%"}}))),i.a.createElement("div",{className:"Body"},i.a.createElement("div",{className:"ActivityOverview"},i.a.createElement("div",{className:"Entry"},i.a.createElement("span",{className:"Key"},"Sport: "),i.a.createElement("span",{className:"Value"},x(m))),i.a.createElement("div",{className:"Entry"},i.a.createElement("span",{className:"Key"},"Date: "),i.a.createElement("span",{className:"Value"},["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][y.getDay()]," ",y.getDate()," ",O(y.getMonth())," ",y.getFullYear())),i.a.createElement("div",{className:"Entry"},i.a.createElement("span",{className:"Key"},"Start location: "),i.a.createElement("span",{className:"Value"},a.match({pending:function(){return"loading"},fulfilled:function(t){return i.a.createElement(i.a.Fragment,null,i.a.createElement(p,{isExpanded:!r,onClick:e.toggleIsStartLocationTruncated}),i.a.createElement(h,{isTruncated:r,location:t}))},rejected:function(e){return console.log("Error loading start location",e),"Error loading location"},onUpdate:e.forceUpdate}))),i.a.createElement("div",{className:"Entry"},i.a.createElement("span",{className:"Key"},"End location: "),i.a.createElement("span",{className:"Value"},o.match({pending:function(){return"loading"},fulfilled:function(t){return i.a.createElement(i.a.Fragment,null,i.a.createElement(p,{isExpanded:!c,onClick:e.toggleIsEndLocationTruncated}),i.a.createElement(h,{isTruncated:c,location:t}))},rejected:function(e){return console.log("Error loading start location",e),"Error loading location"},onUpdate:e.forceUpdate}))),i.a.createElement("div",{className:"Entry"},i.a.createElement("span",{className:"Key"},"Total distance: "),i.a.createElement("span",{className:"Value"},ce()(U(n.total_distance),2))),i.a.createElement("div",{className:"Entry"},i.a.createElement("span",{className:"Key"},"Total duration: "),i.a.createElement("span",{className:"Value"},L(g))),i.a.createElement("div",{className:"Entry"},i.a.createElement("span",{className:"Key"},"Start time: "),i.a.createElement("span",{className:"Value"},k(y))),i.a.createElement("div",{className:"Entry"},i.a.createElement("span",{className:"Key"},"End time: "),i.a.createElement("span",{className:"Value"},k(E)))),i.a.createElement(v,null),i.a.createElement("div",{className:"TimelineContainer"},i.a.createElement(Z,{attribute:J.HeartRate,records:f,offsetIndex:u,viewedDuration:l,filter:e.state.filter,shouldConvertRpmToSpm:M}),i.a.createElement(Z,{attribute:J.Cadence,records:f,offsetIndex:u,viewedDuration:l,filter:e.state.filter,shouldConvertRpmToSpm:M}),i.a.createElement(Z,{attribute:J.Pace,records:f,offsetIndex:u,viewedDuration:l,filter:e.state.filter,shouldConvertRpmToSpm:M})),i.a.createElement(v,null),i.a.createElement("div",{className:"FilterContainer"},i.a.createElement("div",{className:"SectionHeader"},"Filters: "),i.a.createElement("div",{className:"Filter"},i.a.createElement("div",{className:"FilterAttribute"},"Heart Rate"),i.a.createElement("label",{className:"FilterMinLabel"},"Min:"," ",i.a.createElement("input",{className:"FilterMin",type:"text",pattern:"\\d*",value:e.state.filter.pendingHeartRateMin,onChange:e.onChangePendingHeartRateMin,onBlur:e.onSyncPendingBounds})),i.a.createElement("label",{className:"FilterMaxLabel"},"Max:"," ",i.a.createElement("input",{className:"FilterMax",type:"text",pattern:"\\d*",value:e.state.filter.pendingHeartRateMax,onChange:e.onChangePendingHeartRateMax,onBlur:e.onSyncPendingBounds}))),i.a.createElement("div",{className:"Filter"},i.a.createElement("div",{className:"FilterAttribute"},"Cadence"),i.a.createElement("label",{className:"FilterMinLabel"},"Min:"," ",i.a.createElement("input",{className:"FilterMin",type:"text",pattern:"\\d*",value:e.state.filter.pendingCadenceMin,onChange:e.onChangePendingCadenceMin,onBlur:e.onSyncPendingBounds})),i.a.createElement("label",{className:"FilterMaxLabel"},"Max:"," ",i.a.createElement("input",{className:"FilterMax",type:"text",pattern:"\\d*",value:e.state.filter.pendingCadenceMax,onChange:e.onChangePendingCadenceMax,onBlur:e.onSyncPendingBounds}))),i.a.createElement("div",{className:"Filter"},i.a.createElement("div",{className:"FilterAttribute"},"Speed"),i.a.createElement("label",{className:"FilterMinLabel"},"Min:"," ",i.a.createElement("input",{className:"FilterMin",type:"text",pattern:"\\d*",value:e.state.filter.pendingSpeedMin,onChange:e.onChangePendingSpeedMin,onBlur:e.onSyncPendingBounds})),i.a.createElement("label",{className:"FilterMaxLabel"},"Max:"," ",i.a.createElement("input",{className:"FilterMax",type:"text",pattern:"\\d*",value:e.state.filter.pendingSpeedMax,onChange:e.onChangePendingSpeedMax,onBlur:e.onSyncPendingBounds})))),i.a.createElement(v,null),i.a.createElement("div",{className:"CumulativesContainer"},i.a.createElement("div",{className:"SectionHeader"},"Filtered stats: "),i.a.createElement("div",{className:"Entry"},i.a.createElement("span",{className:"Key"},"Total duration: "),i.a.createElement("span",{className:"Value"},L(d.totalDuration))),i.a.createElement("div",{className:"Entry"},i.a.createElement("span",{className:"Key"},"Total distance (mi): "),i.a.createElement("span",{className:"Value"},ce()(U(d.totalDistance),2))),i.a.createElement("div",{className:"Entry"},i.a.createElement("span",{className:"Key"},"Average pace (min/mi): "),i.a.createElement("span",{className:"Value"},A(d.averagePace))),i.a.createElement("div",{className:"Entry"},i.a.createElement("span",{className:"Key"},"Average heart rate (bpm): "),i.a.createElement("span",{className:"Value"},Math.floor(d.averageHeartRate))))))}}))}},{key:"handleUpload",value:function(){var e=this,t=this.fileRef.current.files;if(null!==t&&"object"===typeof t&&t.length>0){var n=t[0],a=new FileReader;a.addEventListener("loadend",function(){if(a.error)throw a.error;var t=a.result;new R({force:!0,speedUnit:"km/h",lengthUnit:"m",temperatureUnit:"kelvin",elapsedRecordField:!0,mode:"cascade"}).parse(t,function(t,n){if(t)throw t;var a=n.activity.sessions[0],i=function(e){return e.sessions.map(function(e){return function(e){return e.laps.map(function(e){return e.records}).flat()}(e)}).flat()}(n.activity),r=i[i.length-1],o=V(n);e.setState({activity:ve.some({activity:o,startLocation:Me.fromPromise(D(a.start_position_lat,a.start_position_long)),isStartLocationTruncated:!0,endLocation:Me.fromPromise(D(r.position_lat,r.position_long)),isEndLocationTruncated:!0,offsetTime:_(o),offsetIndex:0,viewedDuration:Ne,cumulatives:ue(o,e.state.filter),timelineScroll:ve.none()})})})}),a.readAsArrayBuffer(n)}}},{key:"toggleIsStartLocationTruncated",value:function(){this.setState(function(e){return{activity:e.activity.map(function(e){return Object(c.a)({},e,{isStartLocationTruncated:!e.isStartLocationTruncated})})}})}},{key:"toggleIsEndLocationTruncated",value:function(){this.setState(function(e){return{activity:e.activity.map(function(e){return Object(c.a)({},e,{isEndLocationTruncated:!e.isEndLocationTruncated})})}})}},{key:"onMouseDown",value:function(e){this.onPointerDown(e.target,e.clientX,e.clientY)}},{key:"onTouchStart",value:function(e){var t=e.touches[0];this.onPointerDown(e.target,t.clientX,t.clientY)}},{key:"onPointerDown",value:function(e,t,n){this.setState(function(a){return{mouseDownTarget:ve.some(e),activity:a.activity.map(function(e){return Object(c.a)({},e,{timelineScroll:ve.some({initialPointerLocation:{x:t,y:n},initialOffsetTime:e.offsetTime})})})}})}},{key:"onMouseUp",value:function(){this.onPointerUp()}},{key:"onTouchEnd",value:function(){this.onPointerUp()}},{key:"onPointerUp",value:function(){this.setState(function(e){return{activity:e.activity.map(function(e){return Object(c.a)({},e,{timelineScroll:ve.none()})}),mouseDownTarget:ve.none()}})}},{key:"onMouseMove",value:function(e){this.onPointerMove(e.clientX,e.clientY)}},{key:"onTouchMove",value:function(e){var t=e.touches[0];this.onPointerMove(t.clientX,t.clientY)}},{key:"onPointerMove",value:function(e,t){if(this.minimapRef&&this.minimapRef.current)if(this.isCursorDragged()){var n=this.minimapRef.current.getBoundingClientRect(),a=(e-n.left)/n.width,i=Math.min(1,Math.max(0,a));this.setState(function(e){return{activity:e.activity.map(function(e){var t=function(e,t,n){var a=e.getTime(),i=t.getTime();return new Date(a+(i-a)*n)}(_(e.activity),I(e.activity),i);return Object(c.a)({},e,{offsetTime:t,offsetIndex:H(e.activity.records,t)})})}})}else this.isTimelineDragged()&&this.setState(function(t){return{activity:t.activity.map(function(t){return t.timelineScroll.match({none:function(){return t},some:function(n){var a=n.initialPointerLocation,i=n.initialOffsetTime,r=(e-a.x)/window.innerWidth,o=-t.viewedDuration*r,s=i.getTime()+o,u=_(t.activity),l=I(t.activity),d=Math.max(u.getTime(),Math.min(l.getTime(),s)),m=new Date(d),f=H(t.activity.records,m);return Object(c.a)({},t,{offsetTime:m,offsetIndex:f})}})})}})}},{key:"isCursorDragged",value:function(){var e=this.minimapRef;return this.state.mouseDownTarget.match({none:function(){return!1},some:function(t){return!!(e&&e.current&&j(e.current,t))}})}},{key:"isTimelineDragged",value:function(){return this.state.mouseDownTarget.match({none:function(){return!1},some:function(e){return"CANVAS"===e.tagName}})}},{key:"onChangePendingBound",value:function(e,t,n){this.setState({filter:this.state.filter.setPendingBound(e,t,n.target.value)})}},{key:"onSyncPendingBounds",value:function(){var e=this.state.filter.syncPendingBoundsWithActualBounds();this.setState({filter:e,activity:this.state.activity.map(function(t){return Object(c.a)({},t,{cumulatives:ue(t.activity,e)})})})}}]),t}(i.a.Component),Ne=3e5;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},69:function(e,t,n){e.exports=n(160)},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){}},[[69,1,2]]]);
//# sourceMappingURL=main.a0221c7f.chunk.js.map